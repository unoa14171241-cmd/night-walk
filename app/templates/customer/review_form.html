{% extends "customer/base.html" %}

{% block title %}å£ã‚³ãƒŸæŠ•ç¨¿ - {{ shop.name }} - Night-Walk{% endblock %}

{% block content %}
<div class="container">
    <div class="row justify-content-center">
        <div class="col-lg-6">
            <div class="card">
                <div class="card-header">
                    <h4 class="mb-0">å£ã‚³ãƒŸã‚’æŠ•ç¨¿</h4>
                </div>
                <div class="card-body">
                    <!-- åº—èˆ—æƒ…å ± -->
                    <div class="shop-info mb-4 p-3 bg-dark rounded">
                        <h5 class="mb-1">{{ shop.name }}</h5>
                        <small class="text-muted">{{ shop.area }} / {{ shop.category_label }}</small>
                    </div>
                    
                    <form method="POST" id="reviewForm">
                        <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
                        
                        <!-- æ˜Ÿè©•ä¾¡ -->
                        <div class="mb-4">
                            <label class="form-label">è©•ä¾¡ <span class="text-danger">*</span></label>
                            <div class="star-rating-input">
                                {% for i in range(5, 0, -1) %}
                                <input type="radio" name="rating" value="{{ i }}" id="star{{ i }}" 
                                       {% if rating == i %}checked{% endif %} required>
                                <label for="star{{ i }}" title="{{ i }}ã¤æ˜Ÿ">â˜…</label>
                                {% endfor %}
                            </div>
                            <small class="text-muted d-block mt-2">
                                ã‚¿ãƒƒãƒ—ã—ã¦è©•ä¾¡ã‚’é¸æŠã—ã¦ãã ã•ã„ï¼ˆ1ã€œ5ã¤æ˜Ÿï¼‰
                            </small>
                        </div>
                        
                        <!-- é›»è©±ç•ªå· -->
                        <div class="mb-4">
                            <label for="phone_number" class="form-label">
                                é›»è©±ç•ªå·ï¼ˆSMSèªè¨¼ç”¨ï¼‰ <span class="text-danger">*</span>
                            </label>
                            <input type="tel" class="form-control" id="phone_number" name="phone_number"
                                   value="{{ phone_number or '' }}" placeholder="090-1234-5678"
                                   pattern="[0-9\-+]+" required>
                            <small class="text-muted">
                                èªè¨¼ã‚³ãƒ¼ãƒ‰ã‚’é€ä¿¡ã—ã¾ã™ã€‚ä¸æ­£æŠ•ç¨¿é˜²æ­¢ã®ãŸã‚ã€1ã¤ã®é›»è©±ç•ªå·ã‹ã‚‰1åº—èˆ—1å›ã®ã¿æŠ•ç¨¿å¯èƒ½ã§ã™ã€‚
                            </small>
                        </div>
                        
                        <!-- æ³¨æ„äº‹é … -->
                        <div class="alert alert-secondary mb-4">
                            <h6 class="alert-heading mb-2">ğŸ“ æŠ•ç¨¿ã«ã¤ã„ã¦</h6>
                            <ul class="mb-0 small">
                                <li>æ˜Ÿè©•ä¾¡ã®ã¿ï¼ˆæ–‡å­—å…¥åŠ›ã¯ã‚ã‚Šã¾ã›ã‚“ï¼‰</li>
                                <li>SMSèªè¨¼ãŒå¿…è¦ã§ã™ï¼ˆ1ç«¯æœ«1è©•ä¾¡ï¼‰</li>
                                <li>æŠ•ç¨¿å®Œäº†ã§ <strong>500ãƒã‚¤ãƒ³ãƒˆ</strong> ãƒ—ãƒ¬ã‚¼ãƒ³ãƒˆï¼</li>
                            </ul>
                        </div>
                        
                        <div class="d-grid gap-2">
                            <button type="submit" class="btn btn-primary btn-lg">
                                èªè¨¼ã‚³ãƒ¼ãƒ‰ã‚’é€ä¿¡
                            </button>
                            <a href="{{ url_for('public.shop_detail', shop_id=shop.id) }}" class="btn btn-outline-secondary">
                                ã‚­ãƒ£ãƒ³ã‚»ãƒ«
                            </a>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>

<style>
/* æ˜Ÿè©•ä¾¡å…¥åŠ› */
.star-rating-input {
    display: flex;
    flex-direction: row-reverse;
    justify-content: flex-end;
    gap: 0.25rem;
}

.star-rating-input input {
    display: none;
}

.star-rating-input label {
    font-size: 2.5rem;
    color: var(--color-text-muted);
    cursor: pointer;
    transition: color 0.2s;
}

.star-rating-input label:hover,
.star-rating-input label:hover ~ label,
.star-rating-input input:checked ~ label {
    color: #ffc107;
}

.star-rating-input input:checked ~ label {
    text-shadow: 0 0 10px rgba(255, 193, 7, 0.5);
}
</style>
{% endblock %}
