{% extends "base.html" %}

{% block title %}å¯©æŸ»å¾…ã¡åº—èˆ— - Night-Walk{% endblock %}

{% block content %}
<div class="admin-layout">
    {% include "admin/_sidebar.html" %}
    
    <div class="admin-content">
        <div class="d-flex justify-between align-center mb-4">
            <div>
                <h1 class="mb-1">ğŸ” å¯©æŸ»å¾…ã¡åº—èˆ—</h1>
                <p class="text-muted mb-0">{{ shops|length }}ä»¶ã®åº—èˆ—ãŒå¯©æŸ»å¾…ã¡ã§ã™</p>
            </div>
            <a href="{{ url_for('admin.shops') }}" class="btn btn-secondary">
                å…¨åº—èˆ—ä¸€è¦§
            </a>
        </div>
        
        {% if shops %}
        <div class="pending-list">
            {% for shop in shops %}
            <div class="pending-card">
                <div class="pending-header">
                    <div>
                        <h3 class="pending-name">{{ shop.name }}</h3>
                        <p class="pending-meta">
                            ğŸ“ {{ shop.area }} ãƒ» {{ shop.category_label }}
                        </p>
                    </div>
                    <span class="badge badge-warning">å¯©æŸ»å¾…ã¡</span>
                </div>
                
                <div class="pending-info">
                    <div class="info-row">
                        <span class="info-label">ç”³è«‹æ—¥æ™‚</span>
                        <span class="info-value">{{ shop.created_at.strftime('%Y/%m/%d %H:%M') }}</span>
                    </div>
                    <div class="info-row">
                        <span class="info-label">é›»è©±ç•ªå·</span>
                        <span class="info-value">{{ shop.phone or 'æœªå…¥åŠ›' }}</span>
                    </div>
                    <div class="info-row">
                        <span class="info-label">ä½æ‰€</span>
                        <span class="info-value">{{ shop.address or 'æœªå…¥åŠ›' }}</span>
                    </div>
                </div>
                
                <div class="pending-actions">
                    <a href="{{ url_for('admin.shop_detail', shop_id=shop.id) }}" class="btn btn-secondary btn-sm">
                        è©³ç´°ã‚’è¦‹ã‚‹
                    </a>
                    <form method="POST" action="{{ url_for('admin.approve_shop', shop_id=shop.id) }}" style="display: inline;">
                        <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
                        <button type="submit" class="btn btn-success btn-sm" onclick="return confirm('{{ shop.name }}ã‚’æ‰¿èªã—ã¾ã™ã‹ï¼Ÿ')">
                            âœ… æ‰¿èª
                        </button>
                    </form>
                </div>
            </div>
            {% endfor %}
        </div>
        {% else %}
        <div class="card">
            <div class="empty-state">
                <div class="empty-icon">âœ…</div>
                <h3>å¯©æŸ»å¾…ã¡ã®åº—èˆ—ã¯ã‚ã‚Šã¾ã›ã‚“</h3>
                <p class="text-muted">ã™ã¹ã¦ã®åº—èˆ—ãŒå¯©æŸ»æ¸ˆã¿ã§ã™</p>
            </div>
        </div>
        {% endif %}
    </div>
</div>

<style>
.pending-list {
    display: flex;
    flex-direction: column;
    gap: var(--space-md);
}

.pending-card {
    background: var(--color-bg-elevated);
    border: 1px solid var(--color-border);
    border-left: 4px solid var(--color-warning);
    border-radius: var(--radius);
    padding: var(--space-lg);
}

.pending-header {
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
    margin-bottom: var(--space-md);
}

.pending-name {
    font-size: 1.25rem;
    margin: 0 0 var(--space-xs) 0;
}

.pending-meta {
    font-size: 0.875rem;
    color: var(--color-text-muted);
    margin: 0;
}

.pending-info {
    background: var(--color-bg);
    border-radius: var(--radius);
    padding: var(--space-md);
    margin-bottom: var(--space-md);
}

.info-row {
    display: flex;
    padding: var(--space-xs) 0;
}

.info-row:not(:last-child) {
    border-bottom: 1px solid var(--color-border);
}

.info-label {
    width: 100px;
    color: var(--color-text-muted);
    font-size: 0.875rem;
}

.info-value {
    flex: 1;
    font-size: 0.875rem;
}

.pending-actions {
    display: flex;
    gap: var(--space-sm);
}

.empty-state {
    text-align: center;
    padding: var(--space-xl);
}

.empty-icon {
    font-size: 3rem;
    margin-bottom: var(--space-md);
}

.empty-state h3 {
    margin-bottom: var(--space-sm);
}
</style>
{% endblock %}
