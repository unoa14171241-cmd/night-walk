{% extends "base.html" %}

{% block title %}審査待ち店舗 - Night-Walk{% endblock %}

{% block content %}
<div class="admin-layout">
 {% include "admin/_sidebar.html" %}
 
 <div class="admin-content">
 <div class="d-flex justify-between align-center mb-4">
 <div>
 <h1 class="mb-1"> 審査待ち店舗</h1>
 <p class="text-muted mb-0">{{ shops|length }}件の店舗が審査待ちです</p>
 </div>
 <a href="{{ url_for('admin.shops') }}" class="btn btn-secondary">
 全店舗一覧
 </a>
 </div>
 
 {% if shops %}
 <div class="pending-list">
 {% for shop in shops %}
 <div class="pending-card">
 <div class="pending-header">
 <div>
 <h3 class="pending-name">{{ shop.name }}</h3>
 <p class="pending-meta">
 {{ shop.area }} {{ shop.category_label }}
 </p>
 </div>
 <span class="badge badge-warning">審査待ち</span>
 </div>
 
 <div class="pending-info">
 <div class="info-row">
 <span class="info-label">申請日時</span>
 <span class="info-value">{{ shop.created_at.strftime('%Y/%m/%d %H:%M') }}</span>
 </div>
 <div class="info-row">
 <span class="info-label">電話番号</span>
 <span class="info-value">{{ shop.phone or '未入力' }}</span>
 </div>
 <div class="info-row">
 <span class="info-label">住所</span>
 <span class="info-value">{{ shop.address or '未入力' }}</span>
 </div>
 </div>
 
 <div class="pending-actions">
 <a href="{{ url_for('admin.shop_detail', shop_id=shop.id) }}" class="btn btn-secondary btn-sm">
 詳細を見る
 </a>
 <form method="POST" action="{{ url_for('admin.approve_shop', shop_id=shop.id) }}" style="display: inline;">
 <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
 <button type="submit" class="btn btn-success btn-sm" onclick="return confirm('{{ shop.name }}を承認しますか？')">
 承認
 </button>
 </form>
 </div>
 </div>
 {% endfor %}
 </div>
 {% else %}
 <div class="card">
 <div class="empty-state">
 <div class="empty-icon"></div>
 <h3>審査待ちの店舗はありません</h3>
 <p class="text-muted">すべての店舗が審査済みです</p>
 </div>
 </div>
 {% endif %}
 </div>
</div>

<style>
.pending-list {
 display: flex;
 flex-direction: column;
 gap: var(--space-md);
}

.pending-card {
 background: var(--color-bg-elevated);
 border: 1px solid var(--color-border);
 border-left: 4px solid var(--color-warning);
 border-radius: var(--radius);
 padding: var(--space-lg);
}

.pending-header {
 display: flex;
 justify-content: space-between;
 align-items: flex-start;
 margin-bottom: var(--space-md);
}

.pending-name {
 font-size: 1.25rem;
 margin: 0 0 var(--space-xs) 0;
}

.pending-meta {
 font-size: 0.875rem;
 color: var(--color-text-muted);
 margin: 0;
}

.pending-info {
 background: var(--color-bg);
 border-radius: var(--radius);
 padding: var(--space-md);
 margin-bottom: var(--space-md);
}

.info-row {
 display: flex;
 padding: var(--space-xs) 0;
}

.info-row:not(:last-child) {
 border-bottom: 1px solid var(--color-border);
}

.info-label {
 width: 100px;
 color: var(--color-text-muted);
 font-size: 0.875rem;
}

.info-value {
 flex: 1;
 font-size: 0.875rem;
}

.pending-actions {
 display: flex;
 gap: var(--space-sm);
}

.empty-state {
 text-align: center;
 padding: var(--space-xl);
}

.empty-icon {
 font-size: 3rem;
 margin-bottom: var(--space-md);
}

.empty-state h3 {
 margin-bottom: var(--space-sm);
}
</style>
{% endblock %}
