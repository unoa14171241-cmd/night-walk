{% extends "base.html" %}

{% block title %}å‡ºå‹¤çŠ¶æ³æ›´æ–° - {{ cast.name_display }} - Night-Walk{% endblock %}

{% block content %}
<div class="container" style="max-width: 500px; padding: var(--space-lg);">
    
    <div class="d-flex justify-between align-center mb-4">
        <h1 style="font-size: 1.25rem;">ğŸ“… å‡ºå‹¤çŠ¶æ³ã‚’æ›´æ–°</h1>
        <a href="{{ url_for('cast.dashboard') }}" class="btn btn-secondary btn-sm">â† æˆ»ã‚‹</a>
    </div>
    
    <div class="card">
        <form method="POST" action="{{ url_for('cast.update_status') }}">
            <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
            
            <!-- å‡ºå‹¤çŠ¶æ³ -->
            <div class="mb-4">
                <label class="form-label">å‡ºå‹¤çŠ¶æ³</label>
                <div class="d-flex gap-2" style="flex-wrap: wrap;">
                    <label style="flex: 1; min-width: 100px;">
                        <input type="radio" name="work_status" value="working" 
                               {% if cast.work_status == 'working' %}checked{% endif %}
                               style="display: none;">
                        <div class="status-option working">
                            ğŸŸ¢ å‡ºå‹¤ä¸­
                        </div>
                    </label>
                    <label style="flex: 1; min-width: 100px;">
                        <input type="radio" name="work_status" value="scheduled" 
                               {% if cast.work_status == 'scheduled' %}checked{% endif %}
                               style="display: none;">
                        <div class="status-option scheduled">
                            ğŸŸ¡ å‡ºå‹¤äºˆå®š
                        </div>
                    </label>
                    <label style="flex: 1; min-width: 100px;">
                        <input type="radio" name="work_status" value="off" 
                               {% if cast.work_status == 'off' %}checked{% endif %}
                               style="display: none;">
                        <div class="status-option off">
                            âš« ä¼‘ã¿
                        </div>
                    </label>
                </div>
            </div>
            
            <!-- å‡ºå‹¤æ™‚é–“ -->
            <div class="mb-4">
                <label class="form-label">å‡ºå‹¤æ™‚é–“ï¼ˆä»»æ„ï¼‰</label>
                <div class="d-flex gap-2 align-center">
                    <input type="time" name="work_start_time" class="form-control" 
                           value="{{ cast.work_start_time or '' }}" style="flex: 1;">
                    <span>ã€œ</span>
                    <input type="time" name="work_end_time" class="form-control" 
                           value="{{ cast.work_end_time or '' }}" style="flex: 1;">
                </div>
            </div>
            
            <!-- å‡ºå‹¤ãƒ¡ãƒ¢ -->
            <div class="mb-4">
                <label class="form-label">å‡ºå‹¤ãƒ¡ãƒ¢ï¼ˆä»»æ„ãƒ»100æ–‡å­—ï¼‰</label>
                <input type="text" name="work_memo" class="form-control" 
                       value="{{ cast.work_memo or '' }}"
                       maxlength="100" placeholder="ä¾‹: 20æ™‚ã‹ã‚‰å‡ºå‹¤äºˆå®š">
            </div>
            
            <hr style="margin: var(--space-lg) 0;">
            
            <!-- æœ¬æ—¥ã®ã‚³ãƒ¡ãƒ³ãƒˆ -->
            <div class="mb-4">
                <label class="form-label">ğŸ’¬ æœ¬æ—¥ã®ã‚³ãƒ¡ãƒ³ãƒˆï¼ˆãŠå®¢æ§˜ã¸ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ï¼‰</label>
                <textarea name="comment" class="form-control" rows="3" 
                          maxlength="200" placeholder="ä¾‹: ä»Šæ—¥ã‚‚å…ƒæ°—ã«å‡ºå‹¤ã—ã¦ã¾ã™ï¼ä¼šã„ã«æ¥ã¦ã­â™ª">{{ cast.comment or '' }}</textarea>
                <small class="text-muted">200æ–‡å­—ã¾ã§ãƒ»ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ãƒšãƒ¼ã‚¸ã«è¡¨ç¤ºã•ã‚Œã¾ã™</small>
            </div>
            
            <button type="submit" class="btn btn-primary w-100">
                æ›´æ–°ã™ã‚‹
            </button>
        </form>
    </div>
    
</div>

<style>
.status-option {
    padding: var(--space-md);
    border: 2px solid var(--color-border);
    border-radius: 8px;
    text-align: center;
    cursor: pointer;
    transition: all 0.2s;
}

.status-option:hover {
    border-color: var(--color-primary);
}

input[type="radio"]:checked + .status-option.working {
    background: rgba(16, 185, 129, 0.15);
    border-color: var(--color-success);
}

input[type="radio"]:checked + .status-option.scheduled {
    background: rgba(245, 158, 11, 0.15);
    border-color: var(--color-warning);
}

input[type="radio"]:checked + .status-option.off {
    background: var(--color-bg-secondary);
    border-color: var(--color-text-secondary);
}
</style>
{% endblock %}
